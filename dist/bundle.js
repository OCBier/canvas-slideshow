!function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});const a=i(1);!function(){let t=new a.Slideshow("slideshow","imageList.json");t.preload(),t.start(0)}()},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t,e){this.images=[],this.globalImageWidth=i.defaultImageWidth,this.globalImageHeight=i.defaultImageHeight,this.interval=0,this.imageCounter=0,this.controls=null,this.drawingFunction=function(){},this.slideshowElemID=t,this.imagesLocationResource=e}preload(){this.getJSONData((t,e)=>{this.preloadImages(t,e)})}start(t,e=!0){window.addEventListener("pageshow",()=>{!0===e&&this.showPreloader(),this.canvas=document.getElementById("image-canvas"),this.captions=document.getElementById("imageCaption"),this.context=this.canvas.getContext("2d")}),this.handleImageLoad(t,e)}handleImageLoad(t,e){let a=0;a=t,this.imagesLoaded()?(this.fadeoutPreloader(1200),setTimeout(()=>{this.resizeCanvas(),this.drawingFunction=t=>{this.drawSlide(this.captions,this.globalImageWidth,this.globalImageHeight,t)},this.imageCounter=-1,this.setupControls(),this.drawNextSlide(),this.controls.togglePlay(),this.resumeSlideShow()},600)):a<i.loadTimeout?setTimeout(()=>{this.handleImageLoad(a+500,e)},500):alert("Unfortunately, slideshow could not be loaded. Refresh the page or try again later.")}showPreloader(){document.getElementById(this.slideshowElemID).style.opacity=String(.1);let t=document.createElement("div");t.id=i.preloaderElemID;let e=document.createElement("div");e.id="preloader-state",t.appendChild(e),document.body.appendChild(t),t.style.opacity=String(.9)}imagesLoaded(){if(!this.images||0==this.images.length)return!1;for(let t=0;t<this.images.length;++t)if(!this.images[t].complete||!this.images[t]||void 0===this.images[t])return!1;return!0}getJSONData(t){try{var e=new XMLHttpRequest;e.addEventListener("readystatechange",()=>{t(e,this)},!1),e.responseType="json",e.open("GET",this.imagesLocationResource,!0),e.send(null)}catch(t){alert("Error. Request unsuccessful")}}preloadImages(t,e){4===t.readyState&&200===t.status&&(console.log(e),console.log(e.slideshowElemID),t.response.forEach(t=>{var i=new Image;i.src=t.path,i.alt=t.caption,e.images.push(i)}))}fadeoutPreloader(t){let e=document.getElementById(this.slideshowElemID),a=document.getElementById(i.preloaderElemID),n=(Number(),!1),s=!1;Number(e.style.opacity)<1?e.style.opacity=String(Number(e.style.opacity)+i.fadeStep):s=!0,Number(a.style.opacity)>0?a.style.opacity=String(Number(a.style.opacity)-i.fadeStep):n=!0,n&&s?a.style.display="none":setTimeout(()=>{this.fadeoutPreloader(t)},1)}resumeSlideShow(){clearInterval(this.interval),this.interval=setInterval(()=>{this.controls.isRandom()?this.drawRandomSlide():this.controls.isReversed()?this.drawPreviousSlide():this.drawNextSlide()},i.playSpeed)}drawNextSlide(){let t=this.imageCounter+1;t>=this.images.length&&(t=0),this.drawingFunction(t)}drawPreviousSlide(){let t=this.imageCounter-1;t<0&&(t=this.images.length-1),this.drawingFunction(t)}drawRandomSlide(){let t=Math.floor(this.images.length*Math.random());this.drawingFunction(t)}drawSlide(t,e,i,a){this.imageCounter=a;try{this.context.clearRect(0,0,e,i),console.log("Drawing "+this.images[this.imageCounter].src),this.context.drawImage(this.images[this.imageCounter],0,0,e,i),t.innerHTML=this.images[this.imageCounter].alt}catch(t){console.log("Could not draw image "+this.imageCounter+"to canvas because of exception: "+t.toString())}}resizeCanvas(t=!1){let e=window.getComputedStyle(this.canvas,null).width,a=window.getComputedStyle(this.canvas,null).height;this.context=this.canvas.getContext("2d"),e&&a&&!0===t?(this.globalImageWidth=window.innerWidth,this.globalImageHeight=window.innerHeight):e&&(this.globalImageWidth=this.canvas.width=parseInt(e),this.globalImageHeight=this.canvas.height=Math.pow(i.aspectRatio,-1)*this.globalImageWidth),this.context.clearRect(0,0,this.globalImageWidth,this.globalImageHeight)}setupControls(){let t=document.getElementById("play-toggle"),e=document.getElementById("direction-toggle"),i=document.getElementById("random-toggle"),l=document.getElementById("next"),o=document.getElementById("previous"),r=document.getElementById("effects-selector"),h=(document.getElementById("imageCaption"),document.getElementById("full-screen"));this.setupTouchControls(),this.setupKeyboardControls(),this.setupViewChangeHandling();var d=Object.create(s,{playButton:{configurable:!1,writable:!0,enumerable:!0,value:new a(t,!0,()=>{this.playCallback()},"click")},directionButton:{configurable:!1,writable:!0,enumerable:!0,value:new a(e,!0,()=>{this.directionCallback()},"click")},randomButton:{configurable:!1,writable:!0,enumerable:!0,value:new a(i,!0,()=>{this.randomCallback()},"click")},nextButton:{configurable:!1,writable:!0,enumerable:!0,value:new a(l,!0,()=>{this.nextCallback()},"click")},previousButton:{configurable:!1,writable:!0,enumerable:!0,value:new a(o,!0,()=>{this.previousCallback()},"click")},fullScreenButton:{configurable:!1,writable:!0,enumerable:!0,value:new a(h,!0,()=>{this.fullScreenButtonCallback()},"click")},effectSelector:{configurable:!1,writable:!0,enumerable:!0,value:new a(r,!0,()=>{this.effectCallback(this.captions,r.value)},"change")}});this.controls=new n(d)}setupTouchControls(){var t=0;this.canvas.addEventListener("touchstart",e=>{e.preventDefault(),t=e.changedTouches[0].clientX}),this.canvas.addEventListener("touchend",e=>{e.preventDefault(),console.log("touchend");let i=e.changedTouches[0].clientX-t;i>=15?(clearInterval(this.interval),this.controls.isPlaying()&&this.controls.togglePlay(),this.drawNextSlide()):i<=-15&&(clearInterval(this.interval),this.controls.isPlaying()&&this.controls.togglePlay(),this.drawPreviousSlide())})}setupKeyboardControls(){document.addEventListener("keydown",t=>{"ArrowLeft"===t.key?(clearInterval(this.interval),this.controls.isPlaying()&&this.controls.togglePlay(),this.drawPreviousSlide()):"ArrowRight"===t.key&&(clearInterval(this.interval),this.controls.isPlaying()&&this.controls.togglePlay(),this.drawNextSlide())})}fadeTransition(t,e,a=-1,n=-1){var s=a,l=n;(void 0===s||a<0)&&(s=this.globalImageWidth),(void 0===l||n<0)&&(l=this.globalImageHeight),clearInterval(this.interval),this.interval=setInterval(()=>{this.context.globalAlpha>=.1?(this.drawSlide(t,s,l,this.imageCounter),this.context.globalAlpha-=i.fadeStep):(clearInterval(this.interval),this.imageCounter=e,this.interval=setInterval(()=>{this.context.globalAlpha<1?(this.drawSlide(t,s,l,this.imageCounter),this.context.globalAlpha+=i.fadeStep):(clearInterval(this.interval),this.controls.isPlaying()&&this.resumeSlideShow())},i.animationSpeed))},i.animationSpeed)}horizontalTransition(t,e,a=-1,n=-1){clearInterval(this.interval);var s=a,l=n;(void 0===s||a<0)&&(s=this.globalImageWidth),(void 0===l||n<0)&&(l=this.globalImageHeight);var o=0;let r=i.animationSpeed/3,h=this.imageCounter<e;const d=-1*s,c=s+3;this.context.save(),this.interval=setInterval(()=>{this.context.save(),this.context.clearRect(0,0,s,l),h?this.context.translate(-1*o,0):this.context.translate(o,0),this.context.drawImage(this.images[this.imageCounter],0,0,s,l),h?this.context.translate(s,0):this.context.translate(d,0),this.context.drawImage(this.images[e],0,0,s,l),o+=3,this.context.restore(),o>=c&&(clearInterval(this.interval),this.imageCounter=e,t.innerHTML=this.images[this.imageCounter].alt,this.controls.isPlaying()&&this.resumeSlideShow())},r)}verticalTransition(t,e,a=-1,n=-1){clearInterval(this.interval);let s=a,l=n;(void 0===s||a<0)&&(s=this.globalImageWidth),(void 0===l||n<0)&&(l=this.globalImageHeight);let o=0,r=i.animationSpeed/3,h=this.imageCounter<e,d=-1*l;const c=l+3;this.context.save(),this.interval=setInterval(()=>{this.context.save(),this.context.clearRect(0,0,s,l),h?this.context.translate(0,o):this.context.translate(0,-1*o),this.context.drawImage(this.images[this.imageCounter],0,0,s,l),h?this.context.translate(0,d):this.context.translate(0,l),this.context.drawImage(this.images[e],0,0,s,l),o+=3,this.context.restore(),o>=c&&(clearInterval(this.interval),this.imageCounter=e,t.innerHTML=this.images[this.imageCounter].alt,this.controls.isPlaying()&&this.resumeSlideShow())},r)}playCallback(){this.controls.togglePlay()?this.resumeSlideShow():clearInterval(this.interval)}directionCallback(){this.controls.toggleDirection();this.resumeSlideShow()}randomCallback(){var t=this.controls.toggleRandom();clearInterval(this.interval),this.interval=setInterval(()=>{t?this.drawRandomSlide():this.resumeSlideShow()},i.playSpeed)}nextCallback(){this.controls.isRandom()||(clearInterval(this.interval),this.controls.isPlaying()&&this.controls.togglePlay(),this.drawNextSlide())}previousCallback(){this.controls.isRandom()||(clearInterval(this.interval),this.controls.isPlaying()&&this.controls.togglePlay(),this.drawPreviousSlide())}fullScreenButtonCallback(){let t=null;t=this.canvas.requestFullscreen||this.canvas.webkitRequestFullScreen||this.canvas.mozRequestFullScreen||this.canvas.msRequestFullscreen||null,null!==t&&t.call(this.canvas)}setupViewChangeHandling(){let t=()=>{this.resizeCanvas(this.controls.isFullScreen()),setTimeout(()=>{this.drawSlide(this.captions,this.globalImageWidth,this.globalImageHeight,this.imageCounter)},500),this.controls.isPlaying()&&this.resumeSlideShow()};this.canvas.addEventListener("fullscreenchange",()=>{this.controls.isPlaying()&&clearInterval(this.interval),this.controls.toggleFullScreen(),t()}),window.addEventListener("orientationchange",t),window.addEventListener("resize",t)}effectCallback(t,e){console.log(e),"None"===e?this.drawingFunction=e=>{this.drawSlide(t,this.globalImageWidth,this.globalImageHeight,e)}:"fade"===e?this.drawingFunction=e=>{this.fadeTransition(t,e)}:"slide-across"===e?this.drawingFunction=e=>{this.horizontalTransition(t,e)}:"slide-vertically"===e&&(this.drawingFunction=e=>{this.verticalTransition(t,e)})}}e.Slideshow=i,i.defaultImageWidth=640,i.defaultImageHeight=480,i.playSpeed=8e3,i.aspectRatio=16/9,i.animationSpeed=33,i.fadeStep=.008,i.loadTimeout=9e4,i.preloaderElemID="preloader";class a{constructor(t,e,i,a){this.state=!1,this.domElement=t,this.isEnabled=e,this.domElement.classList.add("inactive"),this.isEnabled?this.domElement.classList.add("enabled"):this.domElement.classList.add("disabled"),i&&a&&this.addCallback(a,i)}toggle(){return!!this.isEnabled&&(this.state?(this.domElement.classList.replace("active","inactive"),this.state=!1):(this.domElement.classList.replace("inactive","active"),this.state=!0))}toggleEnabled(){return this.isEnabled?(this.domElement.classList.replace("enabled","disabled"),this.getState()&&this.toggle(),this.isEnabled=!1):(this.domElement.classList.replace("disabled","enabled"),this.isEnabled=!0)}setDomElement(t){this.domElement=t}getDomElement(){return this.domElement}getState(){return this.state}isActive(){return this.isEnabled}addCallback(t,e){this.domElement.addEventListener(t,()=>{e()},!1)}}class n{constructor(t){this.playButton=t.playButton,this.directionButton=t.directionButton,this.randomButton=t.randomButton,this.nextButton=t.nextButton,this.previousButton=t.previousButton,this.effectSelector=t.effectSelector,this.fullScreenButton=t.fullScreenButton}togglePlay(){this.playButton.getDomElement().innerText=this.playButton.toggle()?"Pause":"Play";let t=this.isPlaying(),e=this.randomButton.isActive(),i=this.directionButton.isActive();return t?(e||this.randomButton.toggleEnabled(),i||this.directionButton.toggleEnabled()):(e&&this.randomButton.toggleEnabled(),i&&this.directionButton.toggleEnabled()),t}toggleDirection(){return this.directionButton.getDomElement().innerText=this.directionButton.toggle()?"Forward":"Reverse",this.isReversed()}toggleRandom(){var t=this.randomButton.toggle();return this.randomButton.getDomElement().innerText=t?"In Order":"Randomize",this.previousButton.toggleEnabled(),this.nextButton.toggleEnabled(),this.directionButton.toggleEnabled(),t}toggleFullScreen(){this.fullScreenButton.toggle()}isPlaying(){return this.playButton.getState()}isRandom(){return this.randomButton.getState()}isReversed(){return this.directionButton.getState()}isFullScreen(){return this.fullScreenButton.getState()}}class s{constructor(t,e,i,a,n,s,l){this.playButton=t,this.directionButton=e,this.randomButton=i,this.nextButton=a,this.previousButton=n,this.effectSelector=s,this.fullScreenButton=l}}}]);